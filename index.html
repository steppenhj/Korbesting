<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8">
    <title>Korbesting</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Google Fonts: Roboto & Open Sans -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700|Open+Sans:400,600&display=swap" rel="stylesheet">
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      html {
        font-size: 16px;
      }
      :root {
      --primary-color: #004080;
      --secondary-color: #0059b3;
      --accent-color: #f4f7fa;
      --light-gray: #e0e0e0;
      --text-color: #333;
    }
    /* 기본 리셋 */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: 'Open Sans', sans-serif;
      background: linear-gradient(135deg, var(--accent-color), #cbd7e3);
      color: var(--text-color);
      padding-bottom: 60px;
    }
    header {
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: #fff;
      padding: 1rem;
      text-align: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    }
    header h1 {
      font-family: 'Roboto', sans-serif;
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }
    header p {
      font-size: 1rem;
    }
    nav {
      margin-top: 0.5rem;
    }
    nav ul {
      list-style: none;
      display: flex;
      justify-content: center;
      gap: 1rem;
    }
    nav ul li a {
      display: inline-block;
      padding: 0.5rem 1rem;
      background-color: #fff;
      color: var(--primary-color);
      border: 1px solid var(--primary-color);
      border-radius: 4px;
      text-decoration: none;
      transition: background-color 0.3s, color 0.3s;
    }
    nav ul li a:hover {
      background-color: var(--primary-color);
      color: #fff;
    }
    main {
      max-width: 960px;
      margin: 1rem auto;
      padding: 0 1rem;
    }
      /* 헤더 컨테이너: 제목과 검색창 */
      .header-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 1rem 0;
        padding: 0 1rem;
      }
      .header-container h2 {
        font-size: 1.4rem;
        color: var(--primary-color);
        margin: 0;
      }
      #search-container {
        position: relative;
      }
      #stock-search {
        padding: 0.4rem 2rem 0.4rem 0.5rem;
        font-size: 0.9rem;
        border: 1px solid #ccc;
        border-radius: 4px;
        outline: none;
        transition: border-color 0.3s;
      }
      #stock-search:focus {
        border-color: var(--primary-color);
      }
      #search-icon {
        position: absolute;
        right: 0.5rem;
        top: 50%;
        transform: translateY(-50%);
        pointer-events: none;
        font-size: 1rem;
        color: #888;
      }
    
      h3 {
        margin: 1rem 0 0.5rem;
        font-size: 1.2rem;
        color: var(--primary-color);
        border-bottom: 2px solid var(--primary-color);
        padding-bottom: 0.3rem;
      }
      /* 테이블 스타일 */
      table {
        width: 100%;
        border-collapse: collapse;
        background: #fff;
        box-shadow: 0 2px 4px rgba(0,0,0,0.15);
        margin-bottom: 1rem;
        border-radius: 6px;
        overflow: hidden;
        font-size: 0.9rem;
      }
      table thead {
        background-color: var(--light-gray);
      }
      table th, table td {
        padding: 0.8rem;
        border: 1px solid #ddd;
        text-align: left;
      }
      table tbody tr:nth-child(odd) {
        background-color: #f9f9f9;
      }
      table tr:hover {
        background-color: #f1f1f1;
        cursor: pointer;
        transition: background 0.3s;
      }
      /* 섹터별 섹션 */
      section.sector-section {
        margin-bottom: 1.5rem;
      }
      /* 모달 오버레이 (주식 상세정보용) */
      .modal-overlay {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.6);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 100;
        opacity: 0;
        transition: opacity 0.3s ease;
      }
      .modal-overlay.active {
        display: flex;
        opacity: 1;
      }
      #stock-detail {
        background: #fff;
        padding: 1rem;
        border-radius: 8px;
        width: 90%;
        max-width: 800px;
        max-height: 90vh;
        overflow-y: auto;
        position: relative;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        transform: translateY(-20px);
        transition: transform 0.3s ease;
        font-size: 0.9rem;
      }
      .modal-overlay.active #stock-detail {
        transform: translateY(0);
      }
      #close-detail {
        background-color: var(--primary-color);
        color: #fff;
        border: none;
        padding: 0.4rem 0.8rem;
        position: absolute;
        top: 1rem;
        right: 1rem;
        cursor: pointer;
        border-radius: 4px;
        font-size: 0.8rem;
        transition: background 0.3s;
      }
      #close-detail:hover {
        background-color: #003060;
      }
      /* 모달 상세정보 및 차트 */
      #detail-info {
        margin-top: 0.5rem; 
        line-height: 1.4; 
      }
      #detail-additional {
        margin-top: 0.5rem;
        line-height: 1.4;
        border-top: 1px solid #ddd;
        padding-top: 0.5rem;
      }
      #detail-news {
        margin-top: 0.5rem;
        line-height: 1.4;
        border-top: 1px solid #ddd;
        padding-top: 0.5rem;
      }
      #stock-chart {
        margin-top: 1rem;
        max-height: 300px;
      }
      /* 이벤트 캘린더 */
      #events-calendar {
        margin-top: 1rem;
      }
      /* 포트폴리오 영역: 자산 & 주식을 가로 배치 */
      .portfolio-sections {
        display: flex;
        flex-wrap: nowrap;
        gap: 1rem;
        align-items: flex-start;
      }
      .section-container {
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.15);
        padding: 1rem;
        width: 48%;
      }
      .portfolio-form {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 1rem;
      }
      .portfolio-form label {
        font-weight: 600;
        margin-right: 0.2rem;
        min-width: 60px;
        text-align: right;
      }
      .portfolio-form input[type="number"],
      .portfolio-form input[type="text"] {
        width: 70px;
        padding: 0.3rem;
        border: 1px solid #ccc;
        border-radius: 4px;
        text-align: center;
        outline: none;
        transition: border-color 0.3s;
        font-size: 0.9rem;
      }
      .portfolio-form input:focus {
        border-color: var(--primary-color);
      }
      .portfolio-form button {
        padding: 0.3rem 0.6rem;
        background: var(--primary-color);
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: background 0.3s;
      }
      .portfolio-form button:hover {
        background: #003060;
      }
      .chart-container {
        max-width: 350px;
        margin: 0 auto;
      }
      .recommendation {
        background: var(--light-gray);
        padding: 1rem;
        border-radius: 8px;
        margin-top: 1rem;
        text-align: center;
        font-size: 0.8rem;
      }
      .stock-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 0.5rem;
      }
      .removeStockBtn {
        background: #b30000;
        border: none;
        color: #fff;
        padding: 0.3rem 0.6rem;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.8rem;
      }
      .removeStockBtn:hover {
        background: #800000;
      }
      /* 하단 정보: 오늘 뉴스 & 우리의 철학 */
      .bottom-info {
        max-width: 960px;
        margin: 2rem auto;
        padding: 0 1rem;
      }
      .bottom-info > div {
        background: #fff;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        padding: 1rem;
        margin-bottom: 1rem;
        border-radius: 8px;
      }
      .bottom-info h3 {
        font-size: 1.2rem;
        color: var(--primary-color);
        border-bottom: 2px solid var(--primary-color);
        padding-bottom: 0.3rem;
        margin-bottom: 0.5rem;
      }
      .bottom-info p {
        font-size: 0.95rem;
        color: #555;
        line-height: 1.5;
        margin-bottom: 1rem;
      }
      footer {
        background-color: var(--primary-color);
        color: #fff;
        text-align: center;
        padding: 0.8rem;
        bottom: 0;
        width: 100%;
        font-size: 1rem;
        box-shadow: 0 -2px 6px rgba(0,0,0,0.3);
      }
      @media (max-width: 1000px) {
        .section-container {
          width: 100%;
        }
        .portfolio-sections {
          flex-wrap: wrap;
        }
      }
      @media (max-width: 600px) {
        header h1 {
          font-size: 1.6rem;
        }
        table th, table td {
          padding: 0.6rem;
          font-size: 0.8rem;
        }
      }

      /* --- 추가: 달력 모달 스타일 --- */
      .calendar-modal-overlay {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.6);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 110; /* 주식 상세 모달보다 위로 */
        opacity: 0;
        transition: opacity 0.3s ease;
      }
      .calendar-modal-overlay.calendar-active {
        display: flex;
        opacity: 1;
      }
      .calendar-modal-content {
        background: #fff;
        padding: 1rem;
        border-radius: 8px;
        width: 90%;
        max-width: 600px;
        max-height: 80vh;
        overflow-y: auto;
        position: relative;
        box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        transform: translateY(-20px);
        transition: transform 0.3s ease;
        font-size: 0.9rem;
      }
      .calendar-modal-overlay.calendar-active .calendar-modal-content {
        transform: translateY(0);
      }
      #close-calendar-modal {
        background-color: var(--primary-color);
        color: #fff;
        border: none;
        padding: 0.4rem 0.8rem;
        position: absolute;
        top: 1rem;
        right: 1rem;
        cursor: pointer;
        border-radius: 4px;
        font-size: 0.8rem;
        transition: background 0.3s;
      }
      #close-calendar-modal:hover {
        background-color: #003060;
      }
      #calendar-modal-title {
        margin-top: 0;
        font-size: 1.1rem;
        color: var(--primary-color);
      }
      #calendar-modal-textarea {
        width: 100%;
        margin-top: 1rem;
        font-size: 0.9rem;
        border: 1px solid #ccc;
        border-radius: 4px;
        padding: 0.5rem;
        resize: vertical;
      }
      #save-calendar-memo {
        margin-top: 0.5rem;
        padding: 0.5rem 1rem;
        background: var(--secondary-color);
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.8rem;
      }
      #save-calendar-memo:hover {
        background: #004080;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Korbesting</h1>
      <p>"미국 중소형주, 쉽게 찾고 투자하자!"</p>
      <nav>
        <ul>
          <li><a href="index.html">메인 페이지</a></li>
          <li><a href="포폴.html">다이어리</a></li>
          <li><a href="유명인포폴.html">인기 포트폴리오</a></li>
      </ul>
      </nav>
    </header>

    <div class="bottom-info">
      <div class="today-news">
        <h3>오늘 뉴스</h3>
        <p>
          1. <strong>뉴욕증시 상승 마감 (2025년 2월 18일):</strong> 뉴욕증권거래소에서 다우존스 산업평균지수는 전일 대비 0.02% 상승한 44,566.16으로 마감했습니다. S&P500 지수는 0.25% 오른 6,129.62를 기록하며 사상 최고치를 경신했습니다.
        <br><br>2. <strong>인텔 주가 16% 급등 (2025년 2월 18일):</strong> 인텔은 TSMC와 브로드컴이 인텔의 일부 사업 지분 인수를 검토 중이라는 소식에 주가가 16.06% 상승하여 27.39달러로 마감했습니다.
        <br><br>3. <strong>국제유가 상승 (2025년 2월 18일):</strong> 뉴욕상업거래소에서 3월물 서부 텍사스산 원유(WTI)는 전일 대비 1.11달러(1.57%) 상승한 배럴당 71.85달러에 거래를 마쳤습니다.
      <br><br>4. <strong>미국, 수입산 자동차에 25% 관세 부과 계획 (2025년 2월 18일):</strong> 트럼프 대통령은 수입산 자동차에 25%의 관세를 부과할 예정이며, 이는 4월 2일 발표될 것이라고 밝혔습니다. 
      <br><br>5. <strong>트럼프 대통령, 이달 말 푸틴 대통령과 회담 예정 (2025년 2월 18일):</strong> 도널드 트럼프 미국 대통령은 우크라이나 전쟁 종전을 위한 협상을 위해 이달 말 블라디미르 푸틴 러시아 대통령과 만날 예정이라고 밝혔습니다.
      </p>
      </div>

    <main>
      <div class="header-container">
        <h2>미국 중소형 주식 리스트</h2>
        <div id="search-container">
          <input type="text" id="stock-search" placeholder="티커 또는 회사명 검색">
          <span id="search-icon">&#128269;</span>
        </div>
      </div>
      
      <!-- 섹터별 분리 -->
      <!-- Aerospace & Defense -->
      <section class="sector-section" id="sector-aerospace">
        <h3>Aerospace & Defense / 항공우주·국방</h3>
        <table>
          <thead>
            <tr>
              <th>티커</th>
              <th>회사명 (영문 / 한글)</th>
              <th>전일 종가<br>(2025년 2월 14일)</th>
              <th>연간 매출 성장률 (YoY)</th>
            </tr>
          </thead>
          <tbody>
            <tr class="stock-row" data-ticker="RKLB" data-sector="Aerospace & Defense / 항공우주·국방" data-company="Rocket Lab USA Inc / 로켓 랩 USA" data-growth="45%" 
              data-info="Rocket Lab USA Inc는 소형 위성 발사 및 우주 기술을 개발하는 미국 기업으로, 특히 저궤도 위성 발사체인 '전자 로켓(Electron Rocket)'을 운영하며, 스페이스X와 함께 민간 우주 산업에서 중요한 역할을 하고 있다. 소형 위성 시장이 빠르게 성장하면서, 로켓 랩 역시 발사 횟수를 늘리고 있으며, 최근에는 더 큰 페이로드를 수송할 수 있는 '뉴트론(Neutron)' 로켓 개발에도 박차를 가하고 있다.">
              <td>RKLB</td>
              <td>Rocket Lab USA Inc / 로켓 랩 USA</td>
              <td id="price-RKLB">Loading...</td>
              <td>45%</td>
            </tr>
          </tbody>
        </table>
      </section>
      
      <!-- Communication Services -->
      <section class="sector-section" id="sector-comm">
        <h3>Communication Services / 커뮤니케이션 서비스</h3>
        <table>
          <thead>
            <tr>
              <th>티커</th>
              <th>회사명 (영문 / 한글)</th>
              <th>전일 종가<br>(2025년 2월 14일)</th>
              <th>연간 매출 성장률 (YoY)</th>
            </tr>
          </thead>
          <tbody>
            <tr class="stock-row" data-ticker="FUBO" data-sector="Communication Services / 커뮤니케이션 서비스" data-company="fuboTV Inc / 푸보TV" data-growth="35%" 
              data-info="fuboTV Inc는 스포츠 중계를 중심으로 한 라이브 TV 스트리밍 서비스를 제공하는 기업이다. 기존 케이블 TV의 대안을 제공하는 서비스로, 스포츠 팬들을 주요 타겟층으로 삼아 다양한 스포츠 채널과 실시간 중계를 강점으로 내세우고 있다. 광고 기반 및 구독형 비즈니스 모델을 운영하며, 디즈니+, 넷플릭스와 같은 스트리밍 서비스와 경쟁하고 있다.">
              <td>FUBO</td>
              <td>fuboTV Inc / 푸보TV</td>
              <td id="price-FUBO">Loading...</td>
              <td>35%</td>
            </tr>
          </tbody>
        </table>
      </section>
      
      <!-- Consumer Discretionary -->
      <section class="sector-section" id="sector-consumer-disc">
        <h3>Consumer Discretionary / 임의소비재</h3>
        <table>
          <thead>
            <tr>
              <th>티커</th>
              <th>회사명 (영문 / 한글)</th>
              <th>전일 종가<br>(2025년 2월 14일)</th>
              <th>연간 매출 성장률 (YoY)</th>
            </tr>
          </thead>
          <tbody>
            <tr class="stock-row" data-ticker="YETI" data-sector="Consumer Discretionary / 임의소비재" data-company="YETI Holdings Inc / 예티 홀딩스" data-growth="18%" 
              data-info="YETI Holdings Inc는 프리미엄 쿨러 및 아웃도어 장비를 제조하는 기업으로, 내구성이 뛰어난 제품으로 캠핑 및 아웃도어 활동을 즐기는 소비자들에게 인기가 많다. 특히 강한 보냉력을 자랑하는 쿨러와 텀블러 제품이 유명하며, 아웃도어 브랜드 중에서도 충성도 높은 고객층을 확보하고 있다.">
              <td>YETI</td>
              <td>YETI Holdings Inc / 예티 홀딩스</td>
              <td id="price-YETI">Loading...</td>
              <td>18%</td>
            </tr>
            <tr class="stock-row" data-ticker="UAA" data-sector="Consumer Discretionary / 임의소비재" data-company="Under Armour Inc / 언더 아머" data-growth="12%" 
              data-info="Under Armour Inc는 스포츠웨어와 기능성 의류를 전문으로 하는 글로벌 브랜드다. 기존 스포츠웨어 시장에서 나이키와 아디다스가 강력한 영향력을 행사하는 가운데, 언더 아머는 혁신적인 소재와 퍼포먼스 중심의 디자인을 통해 차별화를 시도하며, 운동선수 및 피트니스 시장에서 꾸준한 인기를 얻고 있다.">
              <td>UAA</td>
              <td>Under Armour Inc / 언더 아머</td>
              <td id="price-UAA">Loading...</td>
              <td>12%</td>
            </tr>
            <tr class="stock-row" data-ticker="COLM" data-sector="Consumer Discretionary / 임의소비재" data-company="Columbia Sportswear Co / 콜롬비아 스포츠웨어" data-growth="7%" 
              data-info="Columbia Sportswear Co는 등산복, 방수 재킷, 겨울용 아웃도어 의류 등을 제조하는 기업으로, 실용성과 내구성을 강조한 제품을 통해 등산과 캠핑을 즐기는 소비자들에게 높은 인기를 얻고 있다. 단순히 패션을 위한 스포츠웨어가 아닌 기능성을 강조한 브랜드로서, 극한 환경에서도 착용할 수 있는 고성능 의류를 제공하는 것이 특징이다.">
              <td>COLM</td>
              <td>Columbia Sportswear Co / 콜롬비아 스포츠웨어</td>
              <td id="price-COLM">Loading...</td>
              <td>7%</td>
            </tr>
          </tbody>
        </table>
      </section>
      
      <!-- Consumer Staples -->
      <section class="sector-section" id="sector-consumer-staples">
        <h3>Consumer Staples / 필수소비재</h3>
        <table>
          <thead>
            <tr>
              <th>티커</th>
              <th>회사명 (영문 / 한글)</th>
              <th>전일 종가<br>(2025년 2월 14일)</th>
              <th>연간 매출 성장률 (YoY)</th>
            </tr>
          </thead>
          <tbody>
            <tr class="stock-row" data-ticker="DOLE" data-sector="Consumer Staples / 필수소비재" data-company="Dole plc / 돌" data-growth="15%" 
              data-info="Dole plc는 바나나, 파인애플, 키위 등 신선 과일 및 채소를 유통하는 글로벌 기업으로, 전 세계에서 과일 및 농산물을 공급하는 선도적인 기업 중 하나다. 건강한 식품 공급과 지속 가능한 농업을 목표로 하며, 최근에는 유기농 및 친환경 제품군도 확대하고 있다.">
              <td>DOLE</td>
              <td>Dole plc / 돌</td>
              <td id="price-DOLE">Loading...</td>
              <td>15%</td>
            </tr>
          </tbody>
        </table>
      </section>
      
      <!-- Financials -->
      <section class="sector-section" id="sector-financials">
        <h3>Financials / 금융</h3>
        <table>
          <thead>
            <tr>
              <th>티커</th>
              <th>회사명 (영문 / 한글)</th>
              <th>전일 종가<br>(2025년 2월 14일)</th>
              <th>연간 매출 성장률 (YoY)</th>
            </tr>
          </thead>
          <tbody>
            <tr class="stock-row" data-ticker="JEF" data-sector="Financials / 금융" data-company="Jefferies Financial Group Inc / 제퍼리스 파이낸셜 그룹" data-growth="11%" 
              data-info="Jefferies Financial Group Inc는 글로벌 투자은행으로, 주식 및 채권 거래, 자산 관리, M&A 컨설팅 등 다양한 금융 서비스를 제공하고 있다. 월가에서 중형 투자은행으로 자리 잡고 있으며, 특히 투자 전략 및 리서치 부문에서 강점을 가지고 있어 기관 투자자들에게 높은 신뢰를 얻고 있다.">
              <td>JEF</td>
              <td>Jefferies Financial Group Inc / 제퍼리스 파이낸셜 그룹</td>
              <td id="price-JEF">Loading...</td>
              <td>11%</td>
            </tr>
            <tr class="stock-row" data-ticker="EVR" data-sector="Financials / 금융" data-company="Evercore Inc / 에버코어" data-growth="6%" 
              data-info="Evercore Inc는 인수합병(M&A) 및 기업 자문을 전문으로 하는 투자은행으로, 대형 금융기관 및 기업들과 협력하여 전략적인 금융 컨설팅을 제공한다. 다른 대형 투자은행들처럼 직접적인 자금 조달보다는 금융 자문에 집중하며, 고부가가치 서비스를 제공하는 데 주력하고 있다.">
              <td>EVR</td>
              <td>Evercore Inc / 에버코어</td>
              <td id="price-EVR">Loading...</td>
              <td>6%</td>
            </tr>
            <tr class="stock-row" data-ticker="SF" data-sector="Financials / 금융" data-company="Stifel Financial Corp / 스티펠 파이낸셜" data-growth="9%" 
              data-info="Stifel Financial Corp는 미국 내 중견 금융 서비스 기업으로, 자산 관리 및 투자 컨설팅을 제공하고 있다. 개인 투자자부터 기관 투자자까지 폭넓은 고객층을 대상으로 금융 서비스를 운영하며, 보수적인 투자 전략을 선호하는 고객들에게 인기가 높다.">
              <td>SF</td>
              <td>Stifel Financial Corp / 스티펠 파이낸셜</td>
              <td id="price-SF">Loading...</td>
              <td>9%</td>
            </tr>
            <tr class="stock-row" data-ticker="EWBC" data-sector="Financials / 금융" data-company="East West Bancorp Inc / 이스트 웨스트 뱅콥" data-growth="4%" 
              data-info="East West Bancorp Inc는 미국과 아시아 간 금융 거래를 전문으로 하는 은행으로, 특히 중국계 기업 및 고객을 대상으로 한 금융 서비스를 제공하는 데 강점을 가지고 있다. 아시아-미국 간 금융 허브 역할을 하며, 미·중 관계 변화에 따라 성장성과 리스크가 동시에 존재하는 금융기관이다.">
              <td>EWBC</td>
              <td>East West Bancorp Inc / 이스트 웨스트 뱅콥</td>
              <td id="price-EWBC">Loading...</td>
              <td>4%</td>
            </tr>
            <tr class="stock-row" data-ticker="NU" data-sector="Financials / 금융" data-company="Nu Holdings Ltd / 누 홀딩스" data-growth="28%" 
              data-info="Nu Holdings Ltd는 브라질을 중심으로 한 핀테크 기업으로, 모바일 기반 디지털 뱅킹 서비스를 제공하며, 전통적인 은행과는 달리 낮은 수수료와 간편한 금융 서비스로 젊은 고객층을 끌어들이고 있다. 남미 시장에서 빠르게 성장하고 있으며, 금융 소외 계층에게도 접근성이 높은 서비스를 제공하는 것이 특징이다.">
              <td>NU</td>
              <td>Nu Holdings Ltd / 누 홀딩스</td>
              <td id="price-NU">Loading...</td>
              <td>28%</td>
            </tr>
            <tr class="stock-row" data-ticker="UPST" data-sector="Financials / 금융" data-company="Upstart Holdings Inc / 업스타트 홀딩스" data-growth="35%" 
              data-info="Upstart Holdings Inc는 인공지능(AI)을 활용한 대출 심사 및 신용 평가를 전문으로 하는 핀테크 기업으로, 기존 신용 점수 체계에 의존하지 않고 대출자의 상환 능력을 보다 정교하게 평가하는 알고리즘을 개발하여 금융 기관과 협력하고 있다.">
              <td>UPST</td>
              <td>Upstart Holdings Inc / 업스타트 홀딩스</td>
              <td id="price-UPST">Loading...</td>
              <td>35%</td>
            </tr>
          </tbody>
        </table>
      </section>
      
      <!-- Biotech / 바이오 헬스케어 -->
      <section class="sector-section" id="sector-biotech">
        <h3>Biotech / 바이오 헬스케어</h3>
        <table>
          <thead>
            <tr>
              <th>티커</th>
              <th>회사명 (영문 / 한글)</th>
              <th>전일 종가<br>(2025년 2월 14일)</th>
              <th>연간 매출 성장률 (2023년 기준)</th>
            </tr>
          </thead>
          <tbody>
            <tr class="stock-row" data-ticker="ARWR" data-sector="Biotech / 바이오 헬스케어" data-company="Arrowhead Pharmaceuticals Inc / 애로우헤드 파마슈티컬스" data-growth="45%" 
              data-info="Arrowhead Pharmaceuticals Inc는 RNA 인터페이스(RNAi) 기술을 기반으로 희귀 질환 및 난치성 질환을 치료하는 신약을 개발하는 바이오테크 기업이다. 특히 간 질환, 심혈관 질환 등을 타겟으로 한 연구를 진행하며, 유전자 발현을 조절하는 혁신적인 치료법을 개발하고 있다.">
              <td>ARWR</td>
              <td>Arrowhead Pharmaceuticals Inc / 애로우헤드 파마슈티컬스</td>
              <td id="price-ARWR">Loading...</td>
              <td>45%</td>
            </tr>
            <tr class="stock-row" data-ticker="GBT" data-sector="Biotech / 바이오 헬스케어" data-company="Global Blood Therapeutics Inc / 글로벌 블러드 테라퓨틱스" data-growth="30%" 
              data-info="Global Blood Therapeutics Inc는 겸상적혈구병(SCD) 치료제를 개발하는 바이오테크 기업으로, 혈액 질환 치료에 초점을 맞추고 있으며, 대표적인 신약으로는 '옥스브리타(Oxbryta)'가 있다. 혈액 내 산소 운반 능력을 개선하는 기전을 통해 환자의 삶의 질을 높이는 데 기여하고 있다.">
              <td>GBT</td>
              <td>Global Blood Therapeutics Inc / 글로벌 블러드 테라퓨틱스</td>
              <td id="price-GBT">Loading...</td>
              <td>30%</td>
            </tr>
            <tr class="stock-row" data-ticker="ICVX" data-sector="Biotech / 바이오 헬스케어" data-company="Icosavax Inc / 이카이오스 바이오사이언스" data-growth="25%" 
              data-info="Icosavax Inc는 백신 개발을 전문으로 하는 바이오테크 기업으로, 특히 바이러스 유사 입자(VLP) 기술을 활용하여 호흡기 질환과 관련된 백신을 연구하고 있다. 감염성 질환 예방을 위한 차세대 백신 플랫폼을 개발하는 데 집중하고 있으며, 최근에는 노인성 호흡기 감염 치료제 개발에 주력하고 있다.">
              <td>ICVX</td>
              <td>Icosavax Inc / 이카이오스 바이오사이언스</td>
              <td id="price-ICVX">Loading...</td>
              <td>25%</td>
            </tr>
            <tr class="stock-row" data-ticker="RVNC" data-sector="Biotech / 바이오 헬스케어" data-company="Revance Therapeutics Inc / 리제너레이션 파마슈티컬스" data-growth="35%" 
              data-info="Revance Therapeutics Inc는 보툴리눔 톡신 및 필러 제품을 개발하는 바이오 기업으로, 기존 보톡스 시장의 강자인 앨러간(현 애브비)과 경쟁하며 차별화된 장기 지속형 주름 개선 치료제와 비수술적 미용 솔루션을 제공하는 데 집중하고 있다.">
              <td>RVNC</td>
              <td>Revance Therapeutics Inc / 리제너레이션 파마슈티컬스</td>
              <td id="price-RVNC">Loading...</td>
              <td>35%</td>
            </tr>
            <tr class="stock-row" data-ticker="SGEN" data-sector="Biotech / 바이오 헬스케어" data-company="Seagen Inc / 시젠" data-growth="40%" 
              data-info="Seagen Inc는 항체-약물 접합체(ADC) 기반의 항암제를 개발하는 바이오테크 기업으로, 기존 항암 치료법 대비 부작용을 줄이면서 효과를 극대화하는 치료법을 연구하고 있다. 대표적인 치료제로는 림프종 및 유방암 치료에 사용되는 ‘아다세트리스(Adcetris)’가 있다.">
              <td>SGEN</td>
              <td>Seagen Inc / 시젠</td>
              <td id="price-SGEN">Loading...</td>
              <td>40%</td>
            </tr>
            <tr class="stock-row" data-ticker="AMPH" data-sector="Biotech / 바이오 헬스케어" data-company="Amphastar Pharmaceuticals Inc / 암파스타 파마슈티컬스" data-growth="37%" 
              data-info="Amphastar Pharmaceuticals Inc는 제네릭 및 바이오의약품을 제조하는 기업으로, 주로 응급 의료, 당뇨, 호흡기 치료제 등 다양한 치료제를 생산하고 있다. 가격 경쟁력을 갖춘 제품으로 제약 시장에서 입지를 넓히고 있으며, 인슐린 및 마취제와 같은 필수 의약품 공급에 집중하고 있다.">
              <td>AMPH</td>
              <td>Amphastar Pharmaceuticals Inc / 암파스타 파마슈티컬스</td>
              <td id="price-AMPH">Loading...</td>
              <td>37%</td>
            </tr>
            <tr class="stock-row" data-ticker="RXRX" data-sector="Biotech / 바이오 헬스케어" data-company="Recursion Pharmaceuticals Inc / 리커전 파마슈티컬스" data-growth="N/A" 
              data-info="Recursion Pharmaceuticals Inc는 AI와 머신러닝을 활용하여 신약 개발을 혁신하는 바이오테크 기업으로, 대규모 생물학적 데이터를 분석하여 신약 후보 물질을 빠르게 도출하는 기술을 보유하고 있다. 전통적인 신약 개발 과정보다 비용과 시간을 절감할 수 있는 접근법을 통해 제약 업계에서 주목받고 있다.">
              <td>RXRX</td>
              <td>Recursion Pharmaceuticals Inc / 리커전 파마슈티컬스</td>
              <td id="price-RXRX">Loading...</td>
              <td>N/A</td>
            </tr>
          </tbody>
        </table>
      </section>
      
      <!-- Materials -->
      <section class="sector-section" id="sector-materials">
        <h3>Materials / 소재</h3>
        <table>
          <thead>
            <tr>
              <th>티커</th>
              <th>회사명 (영문 / 한글)</th>
              <th>전일 종가<br>(2025년 2월 14일)</th>
              <th>연간 매출 성장률 (YoY)</th>
            </tr>
          </thead>
          <tbody>
            <tr class="stock-row" data-ticker="DPM" data-sector="Materials / 소재" data-company="Dundee Precious Metals / 던디 프레셔스 메탈스" data-growth="10%" 
              data-info="Dundee Precious Metals는 캐나다의 금 및 귀금속 채굴 기업으로, 불가리아, 나미비아 등 다양한 지역에서 광산을 운영하며 지속 가능한 채굴 방식을 도입하여 환경 보호와 효율적인 광산 개발을 동시에 추진하고 있다.">
              <td>DPM</td>
              <td>Dundee Precious Metals / 던디 프레셔스 메탈스</td>
              <td id="price-DPM">Loading...</td>
              <td>10%</td>
            </tr>
            <tr class="stock-row" data-ticker="NEM" data-sector="Materials / 소재" data-company="Newmont Corporation / 뉴몬트" data-growth="8%" 
              data-info="Newmont Corporation은 세계 최대 금광업체 중 하나로, 북미, 남미, 호주, 아프리카 등 다양한 지역에서 금 및 귀금속 채굴을 수행하고 있으며, 광산 운영의 지속 가능성과 ESG(환경, 사회, 지배구조) 경영에도 적극적으로 투자하고 있다.">
              <td>NEM</td>
              <td>Newmont Corporation / 뉴몬트</td>
              <td id="price-NEM">Loading...</td>
              <td>8%</td>
            </tr>
          </tbody>
        </table>
      </section>
      
      <!-- Real Estate -->
      <section class="sector-section" id="sector-realestate">
        <h3>Real Estate / 부동산</h3>
        <table>
          <thead>
            <tr>
              <th>티커</th>
              <th>회사명 (영문 / 한글)</th>
              <th>전일 종가<br>(2025년 2월 14일)</th>
              <th>연간 매출 성장률 (YoY)</th>
            </tr>
          </thead>
          <tbody>
            <tr class="stock-row" data-ticker="OPEN" data-sector="Real Estate / 부동산" data-company="Opendoor Technologies Inc / 오픈도어 테크놀로지" data-growth="15%" 
              data-info="Opendoor Technologies Inc는 AI 기반 온라인 부동산 거래 플랫폼을 운영하는 기업으로, 주택 매입 및 판매 과정을 자동화하여 기존 부동산 거래 방식보다 신속하고 효율적인 서비스를 제공하는 것이 특징이다.">
              <td>OPEN</td>
              <td>Opendoor Technologies Inc / 오픈도어 테크놀로지</td>
              <td id="price-OPEN">Loading...</td>
              <td>15%</td>
            </tr>
          </tbody>
        </table>
      </section>
      
      <!-- Renewable Energy / Clean Tech -->
      <section class="sector-section" id="sector-renewable">
        <h3>Renewable Energy / Clean Tech / 재생에너지·클린테크</h3>
        <table>
          <thead>
            <tr>
              <th>티커</th>
              <th>회사명 (영문 / 한글)</th>
              <th>전일 종가<br>(2025년 2월 14일)</th>
              <th>연간 매출 성장률 (YoY)</th>
            </tr>
          </thead>
          <tbody>
            <tr class="stock-row" data-ticker="PLUG" data-sector="Renewable Energy / Clean Tech / 재생에너지·클린테크" data-company="Plug Power Inc / 플러그 파워" data-growth="32%" 
              data-info="Plug Power Inc는 수소 연료전지 시스템을 개발하는 기업으로, 친환경 에너지를 활용한 전기차, 물류 장비, 산업용 장비 등에 적용되는 연료전지를 공급하며, 수소 경제 활성화의 중요한 역할을 수행하고 있다.">
              <td>PLUG</td>
              <td>Plug Power Inc / 플러그 파워</td>
              <td id="price-PLUG">Loading...</td>
              <td>32%</td>
            </tr>
            <tr class="stock-row" data-ticker="SPWR" data-sector="Renewable Energy / Clean Tech / 재생에너지·클린테크" data-company="SunPower Corporation / 선파워 코퍼레이션" data-growth="21%" 
              data-info="SunPower Corporation은 태양광 패널 및 에너지 솔루션을 제공하는 기업으로, 가정용 및 산업용 태양광 발전 시스템을 설계 및 생산하며, 지속 가능한 에너지 시장에서 중요한 기업 중 하나로 자리 잡고 있다.">
              <td>SPWR</td>
              <td>SunPower Corporation / 선파워 코퍼레이션</td>
              <td id="price-SPWR">Loading...</td>
              <td>21%</td>
            </tr>
            <tr class="stock-row" data-ticker="BLNK" data-sector="Renewable Energy / Clean Tech / 재생에너지·클린테크" data-company="Blink Charging Co / 블링크 차징" data-growth="30%" 
              data-info="Blink Charging Co는 전기차 충전소 인프라를 구축하는 기업으로, 공공 및 개인용 전기차 충전 솔루션을 제공하며, 전기차 시장이 확장됨에 따라 지속적으로 성장하고 있는 기업이다.">
              <td>BLNK</td>
              <td>Blink Charging Co / 블링크 차징</td>
              <td id="price-BLNK">Loading...</td>
              <td>30%</td>
            </tr>
          </tbody>
        </table>
      </section>
      
      <!-- Cybersecurity -->
      <section class="sector-section" id="sector-cyber">
        <h3>Cybersecurity / 사이버 보안</h3>
        <table>
          <thead>
            <tr>
              <th>티커</th>
              <th>회사명 (영문 / 한글)</th>
              <th>전일 종가<br>(2025년 2월 14일)</th>
              <th>연간 매출 성장률 (YoY)</th>
            </tr>
          </thead>
          <tbody>
            <tr class="stock-row" data-ticker="CYBR" data-sector="Cybersecurity / 사이버 보안" data-company="CyberArk Software Ltd. / 사이버아크 소프트웨어" data-growth="31%" 
              data-info="CyberArk Software Ltd.는 사이버 보안 전문 기업으로, 기업 및 기관의 계정 보안을 보호하는 솔루션을 제공하며, 해킹 및 내부 보안 위협을 방지하는데 중점을 둔 서비스를 운영하고 있다.">
              <td>CYBR</td>
              <td>CyberArk Software Ltd. / 사이버아크 소프트웨어</td>
              <td id="price-CYBR">Loading...</td>
              <td>31%</td>
            </tr>
            <tr class="stock-row" data-ticker="TENB" data-sector="Cybersecurity / 사이버 보안" data-company="Tenable Holdings Inc. / 텐어블 홀딩스" data-growth="N/A" 
              data-info="Tenable Holdings Inc.는 IT 보안 취약점 분석 및 관리 솔루션을 제공하는 기업으로, 사이버 공격을 사전에 예방하는 데 초점을 맞춘 소프트웨어를 개발하고 있으며, 특히 기업 보안 관리를 위한 플랫폼을 운영하고 있다.">
              <td>TENB</td>
              <td>Tenable Holdings Inc. / 텐어블 홀딩스</td>
              <td id="price-TENB">Loading...</td>
              <td>N/A</td>
            </tr>
            <tr class="stock-row" data-ticker="RPD" data-sector="Cybersecurity / 사이버 보안" data-company="Rapid7 Inc. / 래피드7" data-growth="N/A" 
              data-info="Rapid7 Inc.는 사이버 보안 및 위협 탐지 솔루션을 개발하는 기업으로, 네트워크 보안 분석 및 침해 탐지 기술을 바탕으로 기업의 보안 상태를 실시간으로 모니터링할 수 있는 서비스를 제공한다.">
              <td>RPD</td>
              <td>Rapid7 Inc. / 래피드7</td>
              <td id="price-RPD">Loading...</td>
              <td>N/A</td>
            </tr>
            <tr class="stock-row" data-ticker="QLYS" data-sector="Cybersecurity / 사이버 보안" data-company="Qualys Inc. / 퀄리스" data-growth="N/A" 
              data-info="Qualys Inc.는 클라우드 기반 보안 및 규제 준수 솔루션을 제공하는 기업으로, 기업의 보안 취약점 점검 및 네트워크 보호를 지원하는 플랫폼을 운영하고 있다.">
              <td>QLYS</td>
              <td>Qualys Inc. / 퀄리스</td>
              <td id="price-QLYS">Loading...</td>
              <td>N/A</td>
            </tr>
          </tbody>
        </table>
      </section>
      
      <!-- Technology -->
      <section class="sector-section" id="sector-technology">
        <h3>Technology / 테크놀로지</h3>
        <table>
          <thead>
            <tr>
              <th>티커</th>
              <th>회사명 (영문 / 한글)</th>
              <th>전일 종가<br>(2025년 2월 14일)</th>
              <th>연간 매출 성장률 (YoY)</th>
            </tr>
          </thead>
          <tbody>
            <tr class="stock-row" data-ticker="FOUR" data-sector="Technology / 테크놀로지" data-company="Shift4 Payments Inc / 쉬프트4 페이먼츠" data-growth="40%" 
              data-info="Shift4 Payments Inc는 결제 처리 및 POS 시스템을 제공하는 핀테크 기업으로, 레스토랑, 호텔, 소매점 등 다양한 산업에서 신용카드 및 디지털 결제 솔루션을 지원하고 있다.">
              <td>FOUR</td>
              <td>Shift4 Payments Inc / 쉬프트4 페이먼츠</td>
              <td id="price-FOUR">Loading...</td>
              <td>40%</td>
            </tr>
            <tr class="stock-row" data-ticker="UPWK" data-sector="Technology / 테크놀로지" data-company="Upwork Inc / 업워크" data-growth="25%" 
              data-info="Upwork Inc는 글로벌 프리랜서 플랫폼을 운영하는 기업으로, 다양한 분야의 전문가들이 원격 근무를 통해 프로젝트를 수행할 수 있도록 지원하며, 기업과 프리랜서를 연결하는 역할을 하고 있다.">
              <td>UPWK</td>
              <td>Upwork Inc / 업워크</td>
              <td id="price-UPWK">Loading...</td>
              <td>25%</td>
            </tr>
            <tr class="stock-row" data-ticker="MTTR" data-sector="Technology / 테크놀로지" data-company="Matterport Inc / 매터포트" data-growth="22%" 
              data-info="Matterport Inc는 3D 공간 스캐닝 및 가상 투어 솔루션을 제공하는 기업으로, 부동산, 건축, 소매업 등에서 공간을 디지털화하는 기술을 활용하고 있다.">
              <td>MTTR</td>
              <td>Matterport Inc / 매터포트</td>
              <td id="price-MTTR">Loading...</td>
              <td>22%</td>
            </tr>
            <tr class="stock-row" data-ticker="LAZR" data-sector="Technology / 테크놀로지" data-company="Luminar Technologies Inc / 루미나 테크놀로지" data-growth="27%" 
              data-info="Luminar Technologies Inc는 자율주행 기술을 위한 라이다(LiDAR) 센서를 개발하는 기업으로, 자동차 제조사 및 기술 기업들과 협력하여 자율주행차의 인식 및 주행 안전성을 향상시키는 데 기여하고 있다.">
              <td>LAZR</td>
              <td>Luminar Technologies Inc / 루미나 테크놀로지</td>
              <td id="price-LAZR">Loading...</td>
              <td>27%</td>
            </tr>
            <tr class="stock-row" data-ticker="PATH" data-sector="Technology / 테크놀로지" data-company="UiPath Inc / 유아이패스" data-growth="33%" 
              data-info="UiPath Inc는 로보틱 프로세스 자동화(RPA) 소프트웨어를 개발하는 기업으로, 기업들이 반복적인 업무를 자동화하여 생산성을 높일 수 있도록 지원하는 솔루션을 제공하고 있다.">
              <td>PATH</td>
              <td>UiPath Inc / 유아이패스</td>
              <td id="price-PATH">Loading...</td>
              <td>33%</td>
            </tr>
            <tr class="stock-row" data-ticker="PLTR" data-sector="Technology / 테크놀로지" data-company="Palantir Technologies Inc / 팔란티어 테크놀로지스" data-growth="27%" 
              data-info="Palantir Technologies Inc는 데이터 분석 및 정보 보안 플랫폼을 운영하는 기업으로, 정부 기관 및 기업을 대상으로 빅데이터 분석을 통한 의사결정 지원 시스템을 제공한다.">
              <td>PLTR</td>
              <td>Palantir Technologies Inc / 팔란티어 테크놀로지스</td>
              <td id="price-PLTR">Loading...</td>
              <td>27%</td>
            </tr>
            <tr class="stock-row" data-ticker="AI" data-sector="Technology / 테크놀로지" data-company="C3.ai Inc / C3.ai" data-growth="21%" 
              data-info="C3.ai Inc는 인공지능(AI) 기반 엔터프라이즈 소프트웨어를 개발하는 기업으로, 산업별 AI 솔루션을 제공하여 기업이 데이터 기반 의사 결정을 효율적으로 수행할 수 있도록 지원한다.">
              <td>AI</td>
              <td>C3.ai Inc / C3.ai</td>
              <td id="price-AI">Loading...</td>
              <td>21%</td>
            </tr>
            <tr class="stock-row" data-ticker="VERI" data-sector="Technology / 테크놀로지" data-company="Veritone Inc / 베리톤" data-growth="18%" 
              data-info="Veritone Inc는 AI 기반 미디어 분석 및 데이터 처리 플랫폼을 운영하는 기업으로, 방송, 광고, 법률 등 다양한 분야에서 인공지능을 활용한 자동화 서비스를 제공하고 있다.">
              <td>VERI</td>
              <td>Veritone Inc / 베리톤</td>
              <td id="price-VERI">Loading...</td>
              <td>18%</td>
            </tr>
            <tr class="stock-row" data-ticker="AYX" data-sector="Technology / 테크놀로지" data-company="Alteryx Inc / 알테릭스" data-growth="12%" 
              data-info="Alteryx Inc는 데이터 분석 및 자동화 솔루션을 제공하는 기업으로, 비즈니스 인텔리전스 및 데이터 과학을 위한 툴을 개발하여 기업들이 데이터 기반 의사 결정을 보다 쉽게 할 수 있도록 돕는다.">
              <td>AYX</td>
              <td>Alteryx Inc / 알테릭스</td>
              <td id="price-AYX">Loading...</td>
              <td>12%</td>
            </tr>
          </tbody>
        </table>
      </section>
      
      <!-- 이벤트 캘린더 -->
      <section class="sector-section" id="sector-events">
        <h3>이벤트 캘린더</h3>
        <h4>달력 메모 기능이 있습니다. 로그인 없이 사용해도 저장이 됩니다.</h4>
        <div id="events-calendar">
          <p>이 달의 이벤트 로딩 중...</p>
        </div>
      </section>
    </main>
    
    <!-- 하단 정보: 오늘 뉴스 & 우리의 철학 (푸터 바로 위) -->
      <div class="our-philosophy">
        <h3>중소형주에 대한 우리의 철학</h3>
        <p>
          Korbesting은 미국 중소형주에 특화된 투자 정보를 제공합니다.<br>
          투자자들이 쉽고 신뢰할 수 있는 정보를 필요로 한다는 사실을 깊이 인식하여, 현재 시장에서 체계적으로 정리된 중소형주 정보를 찾기 어렵다는 현실을 바꾸고자 이 서비스를 시작하였습니다.<br>
          우리는 높은 성장 잠재력과 혁신적인 아이디어를 가진 중소형 기업들을 발굴하여, 투자자 여러분께 새로운 기회의 문을 열어드리는 것을 목표로 합니다.<br>
          진심을 담아, 여러분의 성공적인 투자를 위해 언제나 최선을 다하겠습니다.
        </p>
      </div>
    </div>
    
    <!-- 모달: 상세 정보 (주식), 1년 차트, 추가 투자 정보, 최신 뉴스 (달력 제외) -->
    <div class="modal-overlay" id="modal-overlay">
      <section id="stock-detail">
        <button id="close-detail">닫기</button>
        <h2 id="detail-company">회사명</h2>
        <p id="detail-ticker">티커: </p>
        <p id="detail-price">전일 종가: </p>
        <p id="detail-growth">연간 매출 성장률 (YoY): </p>
        <div id="detail-info"></div>
        <div id="detail-additional">
          <!-- 회사 설명 부분은 제거되었습니다. -->
        </div>
        <div id="detail-news"></div>
        <canvas id="stock-chart"></canvas>
      </section>
    </div>

    <!-- 추가: 달력 날짜 클릭 시 메모 모달 -->
    <div class="calendar-modal-overlay" id="calendar-modal-overlay">
      <div class="calendar-modal-content">
        <button id="close-calendar-modal">닫기</button>
        <h2 id="calendar-modal-title"></h2>
        <textarea id="calendar-modal-textarea" rows="5" placeholder="메모를 입력하세요"></textarea>
        <button id="save-calendar-memo">저장</button>
      </div>
    </div>
    
    <footer>
      <p>
        © 2025 Korbesting. All rights reserved.<br>
        사업체 지역: 대한민국 대구<br>
        문의: <a href="mailto:hermann8hesse@gmail.com" style="color:#fff; text-decoration:underline;">hermann8hesse@gmail.com</a><br>
        아이디어가 있으시면 언제든지 메일로 제안해 주세요!
      </p>
    </footer>
    
    <!-- JavaScript -->
    <script>
      // Polygon API 키 및 전일 기준 날짜
      const polygonApiKey = "wFORda5lesMUZ96BmvpJ4x4cE3F2PqBt";
      const previousDate = "2025-02-14";
    
      // 캐시: 전일 종가 데이터 저장
      const priceCache = {};
    
      // 모달(주식 상세) 관련 요소
      const modalOverlay = document.getElementById('modal-overlay');
      const closeDetailBtn = document.getElementById('close-detail');
      const detailCompany = document.getElementById('detail-company');
      const detailTicker = document.getElementById('detail-ticker');
      const detailPrice = document.getElementById('detail-price');
      const detailGrowth = document.getElementById('detail-growth');
      const detailInfo = document.getElementById('detail-info');
      const detailAdditional = document.getElementById('detail-additional');
      const detailNews = document.getElementById('detail-news');
      const stockChartCanvas = document.getElementById('stock-chart');
      let stockChart = null;
    
      // 달력 메모 모달 관련 요소
      const calendarModalOverlay = document.getElementById('calendar-modal-overlay');
      const calendarModalTitle = document.getElementById('calendar-modal-title');
      const calendarModalTextarea = document.getElementById('calendar-modal-textarea');
      const closeCalendarModalBtn = document.getElementById('close-calendar-modal');
      const saveCalendarMemoBtn = document.getElementById('save-calendar-memo');
    
      // 메모 저장용 (localStorage: "calendarNotes")
      let calendarNotes = {};
      let currentSelectedDate = null; // 현재 클릭한 날짜(YYYY-MM-DD)
    
      // 모든 종목 행 선택
      const stockRows = document.querySelectorAll('.stock-row');
    
      // 전역 변수에 이벤트 데이터를 저장 (달력 재생성을 위해)
      window.allEventsGlobal = [];
    
      // DOMContentLoaded: 전일 종가 업데이트 (호출 간격 300ms 적용)
      document.addEventListener('DOMContentLoaded', () => {
        // localStorage에 저장된 calendarNotes 불러오기
        const storedCalendarNotes = localStorage.getItem('calendarNotes');
        if (storedCalendarNotes) {
          calendarNotes = JSON.parse(storedCalendarNotes);
        }
    
        stockRows.forEach((row, index) => {
          const ticker = row.getAttribute('data-ticker');
          const priceCell = document.getElementById(`price-${ticker}`);
          if (priceCache[ticker]) {
            priceCell.textContent = `$${priceCache[ticker].toFixed(2)}`;
          } else {
            setTimeout(() => {
              const url = `https://api.polygon.io/v1/open-close/${ticker}/${previousDate}?adjusted=true&apiKey=${polygonApiKey}`;
              fetch(url)
                .then(resp => resp.json())
                .then(data => {
                  if (data.status === 'OK' && data.close !== undefined) {
                    const closePrice = data.close;
                    priceCache[ticker] = closePrice;
                    priceCell.textContent = `$${closePrice.toFixed(2)}`;
                  } else {
                    console.error("Open-Close API error for", ticker, data);
                    priceCell.textContent = "N/A";
                  }
                })
                .catch(err => {
                  console.error("API fetch error for", ticker, err);
                  priceCell.textContent = "N/A";
                });
            }, index * 300);
          }
        });
        
        // 페이지 하단 이벤트 캘린더 업데이트: 모든 티커 이벤트 가져오기
        fetchAllEvents();
      });
      
      // 종목 행 클릭 → 모달 표시, 차트, 추가 투자 정보, 최신 뉴스 업데이트
      stockRows.forEach(row => {
        row.addEventListener('click', () => {
          const ticker = row.getAttribute('data-ticker');
          const company = row.getAttribute('data-company');
          const growth = row.getAttribute('data-growth');
          const info = row.getAttribute('data-info');
          const priceText = document.getElementById(`price-${ticker}`).textContent;
      
          detailCompany.textContent = company;
          detailTicker.textContent = `티커: ${ticker}`;
          detailPrice.textContent = `전일 종가: ${priceText}`;
          detailGrowth.textContent = `연간 매출 성장률 (YoY): ${growth}`;
          detailInfo.textContent = info;
      
          detailAdditional.innerHTML = `<p>추가 데이터 로딩 중...</p>`;
          detailNews.innerHTML = `<h3>뉴스</h3><p>최신 뉴스 로딩 중...</p>`;
      
          modalOverlay.classList.add('active');
      
          fetchOneYearChart(ticker);
          fetchTickerAdditional(ticker);
          fetchNews(ticker);
        });
      });
      
      // 모달 닫기 (주식 상세 모달)
      closeDetailBtn.addEventListener('click', () => {
        modalOverlay.classList.remove('active');
        if (stockChart) { stockChart.destroy(); }
      });
      
      // 1년치 Aggregates 데이터 가져오기 (v2/aggs API)
      async function fetchOneYearChart(ticker) {
        const fromDate = "2024-02-16";
        const toDate = "2025-02-15";
        const url = `https://api.polygon.io/v2/aggs/ticker/${ticker}/range/1/day/${fromDate}/${toDate}?apiKey=${polygonApiKey}`;
        try {
          const response = await fetch(url);
          if (!response.ok) throw new Error(`HTTP 오류: ${response.status}`);
          const jsonData = await response.json();
          if (jsonData.results) {
            const labels = jsonData.results.map(item => {
              const date = new Date(item.t);
              return date.toLocaleDateString();
            });
            const prices = jsonData.results.map(item => item.c);
            initializeChart(ticker, labels, prices);
          } else {
            console.error("Aggregates API 응답에 결과가 없습니다.");
            initializeChart(ticker, ["No Data"], [0]);
          }
        } catch (error) {
          console.error("Aggregates API 호출 오류:", error);
          const labels = ['Mon','Tue','Wed','Thu','Fri','Sat','Sun'];
          const prices = labels.map(() => (Math.random()*10+50).toFixed(2));
          initializeChart(ticker, labels, prices);
        }
      }
      
      // Chart.js 차트 생성
      function initializeChart(ticker, labels, prices) {
        const ctx = stockChartCanvas.getContext('2d');
        if (stockChart) { stockChart.destroy(); }
        stockChart = new Chart(ctx, {
          type: 'line',
          data: {
            labels: labels,
            datasets: [{
              label: `${ticker} 1년 종가 추이`,
              data: prices,
              borderColor: "#004080",
              backgroundColor: 'rgba(0,64,128,0.1)',
              fill: true,
              tension: 0.3
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: { y: { beginAtZero: false } }
          }
        });
      }
      
      // 추가 투자 정보 업데이트 (v3/reference/tickers API)
      async function fetchTickerAdditional(ticker) {
        const url = `https://api.polygon.io/v3/reference/tickers/${ticker}?apiKey=${polygonApiKey}`;
        try {
          const response = await fetch(url);
          if (!response.ok) throw new Error(`HTTP 오류: ${response.status}`);
          const jsonData = await response.json();
          if (jsonData.results) {
            const res = jsonData.results;
            const week52High = res.week_52_high || "N/A";
            const week52Low = res.week_52_low || "N/A";
            const peRatio = res.pe_ratio || "N/A";
            const marketCap = res.market_cap ? formatNumber(res.market_cap) : "N/A";
            const lastEarningsDate = res.last_earnings_date || "N/A";
            const eps = res.eps || "N/A";
            detailAdditional.innerHTML = `
              <p>52주 최고/최저가: ${week52High} / ${week52Low}</p>
              <p>PER: ${peRatio}</p>
              <p>시가총액: ${marketCap} USD</p>
              <p>최근 실적 발표일: ${lastEarningsDate}, EPS: ${eps}</p>
            `;
          } else {
            console.error("Ticker Additional API 응답 오류:", jsonData);
            detailAdditional.innerHTML = `<p>추가 데이터 없음</p>`;
          }
        } catch (error) {
          console.error("Ticker Additional API 호출 오류:", error);
          detailAdditional.innerHTML = `<p>데이터 로드 오류</p>`;
        }
      }
      
      // 최신 뉴스 업데이트 (v2/reference/news API)
      async function fetchNews(ticker) {
        const url = `https://api.polygon.io/v2/reference/news?ticker=${ticker}&apiKey=${polygonApiKey}`;
        try {
          const response = await fetch(url);
          if (!response.ok) throw new Error(`HTTP 오류: ${response.status}`);
          const jsonData = await response.json();
          if (jsonData.results && jsonData.results.length > 0) {
            const newsHtml = "<h3>뉴스</h3>" + jsonData.results.slice(0, 3).map(article => {
              const publishedDate = new Date(article.published_utc).toLocaleDateString();
              return `<p><strong>${article.title}</strong> (${publishedDate})<br><a href="${article.article_url}" target="_blank">자세히 보기</a></p>`;
            }).join("");
            detailNews.innerHTML = newsHtml;
          } else {
            detailNews.innerHTML = `<p>최신 뉴스 없음</p>`;
          }
        } catch (error) {
          console.error("News API 호출 오류:", error);
          detailNews.innerHTML = `<p>뉴스 데이터 로드 오류</p>`;
        }
      }
      
      // 이벤트 업데이트: 각 티커의 이벤트 가져오기
      async function fetchTickerEvents(ticker) {
        const url = `https://api.polygon.io/v3/reference/tickers/${ticker}/events?apiKey=${polygonApiKey}`;
        try {
          const response = await fetch(url);
          if (!response.ok) throw new Error(`HTTP 오류: ${response.status}`);
          const jsonData = await response.json();
          if (jsonData.results && jsonData.results.length > 0) {
            return jsonData.results.map(ev => ({ ...ev, ticker }));
          } else {
            return [];
          }
        } catch (error) {
          console.error("Events API 호출 오류 for", ticker, error);
          return [];
        }
      }
      
      // 모든 티커의 이벤트를 가져와서 달력 생성
      async function fetchAllEvents() {
        const tickers = Array.from(stockRows).map(row => row.getAttribute('data-ticker'));
        try {
          const eventsArrays = await Promise.all(tickers.map(ticker => fetchTickerEvents(ticker)));
          const allEvents = eventsArrays.flat();
          window.allEventsGlobal = allEvents;  // 전역 변수에 저장
          buildCalendar(allEvents);
        } catch (error) {
          console.error("전체 이벤트 API 호출 오류:", error);
          document.getElementById("events-calendar").innerHTML = "<p>이 달에는 이벤트 없음</p>";
        }
      }
      
      // 달력 생성: 현재 달의 이벤트를 캘린더 형태로 표시  
      // – 각 날짜 셀에 저장된 메모가 있다면, 하단에 메모 일부(최대 10자)를 표시함
      function buildCalendar(events) {
        const now = new Date();
        const year = now.getFullYear();
        const month = now.getMonth();
        const eventsThisMonth = events.filter(ev => {
          const evDate = new Date(ev.event_date);
          return evDate.getFullYear() === year && evDate.getMonth() === month;
        });
        
        const weekdays = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
        let calHTML = "<table style='width:100%; border-collapse: collapse;'><thead><tr>";
        weekdays.forEach(day => {
          calHTML += `<th style="padding: 0.5rem; border: 1px solid #ddd;">${day}</th>`;
        });
        calHTML += "</tr></thead><tbody>";
        
        const firstDay = new Date(year, month, 1).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();
        
        let day = 1;
        for (let i = 0; i < 6; i++) {
          calHTML += "<tr>";
          for (let j = 0; j < 7; j++) {
            if (i === 0 && j < firstDay) {
              calHTML += "<td style='padding: 0.5rem; border: 1px solid #ddd;'></td>";
            } else if (day > daysInMonth) {
              calHTML += "<td style='padding: 0.5rem; border: 1px solid #ddd;'></td>";
            } else {
              const dateStr = `${year}-${(month+1).toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
              let cellContent = `<div>${day}</div>`;
              // 이벤트 정보 (있으면 표시)
              let cellEvents = eventsThisMonth.filter(ev => {
                const evDate = new Date(ev.event_date);
                return evDate.getDate() === day;
              });
              cellEvents.forEach(ev => {
                cellContent += `<div style="font-size:0.75rem; color:#004080;">[${ev.ticker}] ${ev.event_type}</div>`;
              });
              // 저장된 메모가 있다면, 메모 일부를 표시 (최대 10자)
              if (calendarNotes[dateStr] && calendarNotes[dateStr].trim() !== "") {
                const memoText = calendarNotes[dateStr].substring(0,10) + (calendarNotes[dateStr].length > 10 ? "..." : "");
                cellContent += `<div class="memo-indicator" style="font-size:0.65rem; color:#d9534f; margin-top:0.3rem;">메모: ${memoText}</div>`;
              }
              calHTML += `
                <td 
                  style="padding: 0.5rem; border: 1px solid #ddd; vertical-align: top; cursor: pointer;"
                  data-date="${dateStr}"
                >
                  ${cellContent}
                </td>`;
              day++;
            }
          }
          calHTML += "</tr>";
          if (day > daysInMonth) break;
        }
        calHTML += "</tbody></table>";
        
        document.getElementById("events-calendar").innerHTML = calHTML;
        bindCalendarDayClicks();
      }
      
      // 달력의 각 날짜 셀에 클릭 이벤트 바인딩
      function bindCalendarDayClicks() {
        const dayCells = document.querySelectorAll('#events-calendar td[data-date]');
        dayCells.forEach(cell => {
          cell.addEventListener('click', (e) => {
            const date = e.currentTarget.getAttribute('data-date');
            openCalendarModal(date);
          });
        });
      }
      
      // 달력 모달 열기
      function openCalendarModal(dateStr) {
        currentSelectedDate = dateStr;
        calendarModalTitle.textContent = `${dateStr} 메모`;
        // localStorage에서 해당 날짜의 메모 불러오기
        const memo = calendarNotes[dateStr] || '';
        calendarModalTextarea.value = memo;
        calendarModalOverlay.classList.add('calendar-active');
      }
      
      // 달력 모달 닫기
      function closeCalendarModal() {
        calendarModalOverlay.classList.remove('calendar-active');
        currentSelectedDate = null;
      }
      
      closeCalendarModalBtn.addEventListener('click', closeCalendarModal);
      
      // 메모 저장 및 달력 갱신
      saveCalendarMemoBtn.addEventListener('click', () => {
        if (!currentSelectedDate) return;
        calendarNotes[currentSelectedDate] = calendarModalTextarea.value || '';
        localStorage.setItem('calendarNotes', JSON.stringify(calendarNotes));
        closeCalendarModal();
        // 저장 후 전역 이벤트 데이터를 이용해 달력을 다시 생성하여 메모 표시를 갱신함
        buildCalendar(window.allEventsGlobal);
      });
      
      // 천 단위 콤마 추가 함수
      function formatNumber(num) {
        return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      }
      
      // 검색 기능: 입력된 티커 또는 회사명을 포함하는 행만 표시
      const stockSearchInput = document.getElementById('stock-search');
      stockSearchInput.addEventListener('input', () => {
        const query = stockSearchInput.value.trim().toLowerCase();
        stockRows.forEach(row => {
          const ticker = row.getAttribute('data-ticker').toLowerCase();
          const company = row.getAttribute('data-company').toLowerCase();
          if (ticker.includes(query) || company.includes(query)) {
            row.style.display = "";
          } else {
            row.style.display = "none";
          }
        });
      });
      
      // 로컬 스토리지: 자산 포트폴리오 불러오기
      function loadAssetPortfolio() {
        const stored = localStorage.getItem("assetPortfolio");
        if (stored) {
          const asset = JSON.parse(stored);
          document.getElementById("cash-input").value       = asset.cash;
          document.getElementById("bond-input").value       = asset.bond;
          document.getElementById("realEstate-input").value = asset.realEstate;
          document.getElementById("stock-input").value      = asset.stock;
          document.getElementById("other-input").value      = asset.other;
        }
      }
      
      document.addEventListener("DOMContentLoaded", () => {
        loadAssetPortfolio();
        loadStockPortfolio();
        updateAssetChart();
        document.getElementById("updateAssetChart")?.addEventListener("click", updateAssetChart);
        document.getElementById("updateStockChart")?.addEventListener("click", updateStockChart);
      });
      
      document.addEventListener('DOMContentLoaded', () => {
        fetchAllEvents();
      });


      document.addEventListener("DOMContentLoaded", function () {
      function setupToggle(sectionId) {
        const sectorTitle = document.querySelector(`#${sectionId} h3`);
        const dataTable = document.querySelector(`#${sectionId} table`);

        // 화살표 추가
        const toggleArrow = document.createElement("span");
        toggleArrow.innerHTML = " ▼";
        toggleArrow.style.cursor = "pointer";
        sectorTitle.appendChild(toggleArrow);

        // 초기 테이블 숨김 처리
        dataTable.style.display = "none";

        toggleArrow.addEventListener("click", function () {
          if (dataTable.style.display === "none") {
            dataTable.style.display = "table";
            toggleArrow.innerHTML = " ▲";
          } else {
            dataTable.style.display = "none";
            toggleArrow.innerHTML = " ▼";
          }
        });
      }

      setupToggle("sector-aerospace");
      setupToggle("sector-comm");
      setupToggle("sector-consumer-disc");
      setupToggle("sector-consumer-staples");
      setupToggle("sector-financials");
      setupToggle("sector-biotech");
      setupToggle("sector-materials");
      setupToggle("sector-realestate");
      setupToggle("sector-cyber");
      setupToggle("sector-technology");
      setupToggle("sector-renewable");
    });
  </script>
  </body>
</html>
